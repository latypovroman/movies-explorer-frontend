{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useCallback } from \"react\";\nexport function useFormWithValidation() {\n  _s();\n\n  const [values, setValues] = React.useState({});\n  const [errors, setErrors] = React.useState({});\n  const [isValid, setIsValid] = React.useState(false);\n\n  const handleChange = event => {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n\n    if (name === 'name' && input.validity.patternMismatch) {\n      input.setCustomValidity('Имя должно содержать только латиницу, кириллицу, пробел или дефис.');\n    } else {\n      input.setCustomValidity('');\n    }\n\n    if (name === 'email') {\n      if (!isEmail(value)) {\n        input.setCustomValidity('Некорректый адрес почты.');\n      } else {\n        input.setCustomValidity('');\n      }\n    }\n\n    setValues({ ...values,\n      [name]: value\n    });\n    setErrors({ ...errors,\n      [name]: target.validationMessage\n    });\n    setIsValid(target.closest(\"form\").checkValidity());\n  };\n\n  const resetForm = useCallback(function () {\n    let newValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let newErrors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let newIsValid = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    setValues(newValues);\n    setErrors(newErrors);\n    setIsValid(newIsValid);\n  }, [setValues, setErrors, setIsValid]);\n  return {\n    values,\n    handleChange,\n    errors,\n    isValid,\n    resetForm\n  };\n}\n\n_s(useFormWithValidation, \"msMIfc7pG71dSFDSlZa7+l3GN6k=\");","map":{"version":3,"names":["React","useCallback","useFormWithValidation","values","setValues","useState","errors","setErrors","isValid","setIsValid","handleChange","event","target","name","value","input","validity","patternMismatch","setCustomValidity","isEmail","validationMessage","closest","checkValidity","resetForm","newValues","newErrors","newIsValid"],"sources":["D:/projects/movies-explorer-frontend/src/hooks/useValidation.js"],"sourcesContent":["import React, { useCallback } from \"react\";\r\n\r\nexport function useFormWithValidation() {\r\n    const [values, setValues] = React.useState({});\r\n    const [errors, setErrors] = React.useState({});\r\n    const [isValid, setIsValid] = React.useState(false);\r\n\r\n    const handleChange = (event) => {\r\n        const target = event.target;\r\n        const name = target.name;\r\n        const value = target.value;\r\n\r\n        if (name === 'name' && input.validity.patternMismatch) {\r\n            input.setCustomValidity('Имя должно содержать только латиницу, кириллицу, пробел или дефис.')\r\n        } else {\r\n            input.setCustomValidity('');\r\n        }\r\n\r\n        if (name === 'email') {\r\n            if (!isEmail(value)) {\r\n                input.setCustomValidity('Некорректый адрес почты.');\r\n            } else {\r\n                input.setCustomValidity('');\r\n            }\r\n        }\r\n\r\n        setValues({...values, [name]: value});\r\n        setErrors({...errors, [name]: target.validationMessage });\r\n        setIsValid(target.closest(\"form\").checkValidity());\r\n    };\r\n\r\n    const resetForm = useCallback(\r\n        (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n            setValues(newValues);\r\n            setErrors(newErrors);\r\n            setIsValid(newIsValid);\r\n        },\r\n        [setValues, setErrors, setIsValid]\r\n    );\r\n\r\n    return { values, handleChange, errors, isValid, resetForm };\r\n}"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;AAEA,OAAO,SAASC,qBAAT,GAAiC;EAAA;;EACpC,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBJ,KAAK,CAACK,QAAN,CAAe,EAAf,CAA5B;EACA,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,KAAK,CAACK,QAAN,CAAe,EAAf,CAA5B;EACA,MAAM,CAACG,OAAD,EAAUC,UAAV,IAAwBT,KAAK,CAACK,QAAN,CAAe,KAAf,CAA9B;;EAEA,MAAMK,YAAY,GAAIC,KAAD,IAAW;IAC5B,MAAMC,MAAM,GAAGD,KAAK,CAACC,MAArB;IACA,MAAMC,IAAI,GAAGD,MAAM,CAACC,IAApB;IACA,MAAMC,KAAK,GAAGF,MAAM,CAACE,KAArB;;IAEA,IAAID,IAAI,KAAK,MAAT,IAAmBE,KAAK,CAACC,QAAN,CAAeC,eAAtC,EAAuD;MACnDF,KAAK,CAACG,iBAAN,CAAwB,oEAAxB;IACH,CAFD,MAEO;MACHH,KAAK,CAACG,iBAAN,CAAwB,EAAxB;IACH;;IAED,IAAIL,IAAI,KAAK,OAAb,EAAsB;MAClB,IAAI,CAACM,OAAO,CAACL,KAAD,CAAZ,EAAqB;QACjBC,KAAK,CAACG,iBAAN,CAAwB,0BAAxB;MACH,CAFD,MAEO;QACHH,KAAK,CAACG,iBAAN,CAAwB,EAAxB;MACH;IACJ;;IAEDd,SAAS,CAAC,EAAC,GAAGD,MAAJ;MAAY,CAACU,IAAD,GAAQC;IAApB,CAAD,CAAT;IACAP,SAAS,CAAC,EAAC,GAAGD,MAAJ;MAAY,CAACO,IAAD,GAAQD,MAAM,CAACQ;IAA3B,CAAD,CAAT;IACAX,UAAU,CAACG,MAAM,CAACS,OAAP,CAAe,MAAf,EAAuBC,aAAvB,EAAD,CAAV;EACH,CAtBD;;EAwBA,MAAMC,SAAS,GAAGtB,WAAW,CACzB,YAAwD;IAAA,IAAvDuB,SAAuD,uEAA3C,EAA2C;IAAA,IAAvCC,SAAuC,uEAA3B,EAA2B;IAAA,IAAvBC,UAAuB,uEAAV,KAAU;IACpDtB,SAAS,CAACoB,SAAD,CAAT;IACAjB,SAAS,CAACkB,SAAD,CAAT;IACAhB,UAAU,CAACiB,UAAD,CAAV;EACH,CALwB,EAMzB,CAACtB,SAAD,EAAYG,SAAZ,EAAuBE,UAAvB,CANyB,CAA7B;EASA,OAAO;IAAEN,MAAF;IAAUO,YAAV;IAAwBJ,MAAxB;IAAgCE,OAAhC;IAAyCe;EAAzC,CAAP;AACH;;GAvCerB,qB"},"metadata":{},"sourceType":"module"}